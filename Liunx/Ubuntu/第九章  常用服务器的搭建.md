# 第九章  常用服务器的搭建

## 1.配置FTP服务器

### 1.1.FTP简介

​	FTP（File Transfer Protocol，文件传送协议）是TCP/IP网络上两台计算机间传送文件的协议，FTP是在TCP/IP网络和Internet上最早使用的协议之一，它属于网络协议组的应用层。FTP客户机可以给服务器发出命令来下载文件、上传文件、创建或改变服务器上的目录。FTP服务一般运行在20和21两个端口。端口20用于在FTP客户端和服务器之间传输数据流，而端口21用于传输控制流，并且是命令通向FTP服务器的入口。当数据通过数据流传输时，控制流处于空闲状态。

​	FTP的优点如下：

1. 促进文件（计算机程序或数据）的共享；
2. 鼓励间接或者隐式使用远程计算机；
3. 向用户屏蔽不同主机中各种文件存储系统的细节；
4. 能够可靠和高效的传输数据。



​	FTP的缺点如下：

1. 密码和文件内容都是用明文传输，可能遭受窃听；
2. 因为必须开放一个随机的端口来建立连接，当防火墙存在时，客户端很难过滤处于主动模式下的FTP流浪。这个问题通过使用被动模式的FTP基本上得到了解决；
3. 服务器可能会被告连接一个第三方计算机的保留端口。



​	在FTP的使用中，有两个经常遇到的概念：下载(download)和上传(upload)。下载文件就是从远程主机复制文件到自己的计算机；上传文件就是从自己的计算机复制至远程主机。



### 1.2.安装FTP服务器

​	在Ubuntu下常用的FTP服务器软件是vsftpd（very secure FTP daemon）。

- **安装FTP服务器软件：**

```shell
apt-get install vsftpd
```

<img src="C:/Users/HP/AppData/Roaming/Typora/typora-user-images/image-20230919172740925.png" alt="image-20230919172740925" style="zoom:50%;" />

​	安装完成后，系统会在/etc/init.d目录下创建一个vsftpd的文件脚本，并会在系统的启动过程中自动运行vsftpd守护进程。在终端下，使用命令显示/etc/init.d/vsftpd文件内容，并可以使用`pidof`命令查看守护进程的PID

```shell
cat /etc/init.d/vsftpd
```

```shell
pidof vsftpd
```

<img src="C:/Users/HP/AppData/Roaming/Typora/typora-user-images/image-20230919173106533.png" alt="image-20230919173106533" style="zoom:50%;" />

- **vsftpd程序的启动、停止和重新启动：**

```shell
service vsftpd start					# 启动vsftpd
service vsftpd stop 					# 停止vsftpd
service vsftpd restart					# 重启vsftpd
```



### 1.3.配置FTP服务器